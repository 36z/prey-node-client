//////////////////////////////////////////
// NodeJS Async Command Runner
// (c) 2011 - Fork Ltd.
// by Tomas Pollak - http://usefork.com
// GPLv3 Licensed
//////////////////////////////////////////

var sys = require('sys'),
		emitter = require('events').EventEmitter,
		exec = require('child_process').exec;

var Command = function(str){

	var self = this;
	var run = function(comm){

		var env = {
			PATH: "/bin;/sbin;/usr/bin;/usr/sbin;/usr/local/sbin;"
		}

		exec(comm, env, function(error, stdout, stderr){
			if(error) self.emit('error', error);
			else self.emit('return', stdout);
		});

	}

	run(str);

};

sys.inherits(Command, emitter);
module.exports = Command;
